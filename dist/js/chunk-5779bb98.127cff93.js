(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5779bb98"],{"0d3c":function(e,t,a){},1150:function(e,t,a){"use strict";a("9fef")},"3feb":function(e,t,a){"use strict";a("0d3c")},4731:function(e,t,a){},"9fef":function(e,t,a){},b173:function(e,t,a){"use strict";a.r(t);a("a9e3");var o=a("7a23"),n=Object(o.withScopeId)("data-v-e5e77886");Object(o.pushScopeId)("data-v-e5e77886");var c={key:0,class:"ivo-convertible-issue"},r={class:"ivo-convertible-issue__item"},i={class:"ivo-convertible-issue__inner ivo-convertible-issue__left"},s={class:"ivo-convertible-issue__item"},l={class:"ivo-convertible-issue__inner ivo-convertible-issue__right"},u={class:"ivo-convertible-issue__inner ivo-convertible-issue__right"},d={class:"view-info-module"},m={class:"view-info-module__item"},b={class:"view-info-module__inner"},p={class:"label"},v={class:"value"},O=Object(o.createTextVNode)("--"),j={class:"view-info-module__item view-info-module__border"},f={class:"view-info-module__inner"},h={class:"label"},V={class:"value"},g=Object(o.createTextVNode)("--"),y={class:"view-info-module__item"},T={class:"view-info-module__inner"},D={class:"label"},k={class:"value"},w=Object(o.createTextVNode)("--"),N={class:"view-info-module__item"},S={class:"view-info-module__inner"},_=Object(o.createTextVNode)("--"),F={class:"view-info-module"},x={class:"view-info-module__item"},A={class:"view-info-module__inner"},C={class:"action-module"};Object(o.popScopeId)();var I=n((function(e,t,a,I,B,M){var P=Object(o.resolveComponent)("Setup1"),L=Object(o.resolveComponent)("Setup3"),U=Object(o.resolveComponent)("DaButton"),H=Object(o.resolveComponent)("PageWrapper"),R=Object(o.resolveComponent)("Loading"),E=Object(o.resolveComponent)("TxFinish");return Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,null,[Object(o.createVNode)(H,{showBreadcrumbs:!0},{default:n((function(){var t,a;return[e.commonData.loadFinished?(Object(o.openBlock)(),Object(o.createBlock)("div",c,[Object(o.createVNode)("div",r,[Object(o.createVNode)("div",i,[Object(o.createVNode)(P,{onNext:e.bindSetup1Next,isVoucherManager:e.accountInfo.isVoucherManager},null,8,["onNext","isVoucherManager"])])]),Object(o.createVNode)("div",s,[Object(o.createVNode)("div",l,[Object(o.createVNode)(L,{onNext:e.bindSetup3Next,isVoucherManager:e.accountInfo.isVoucherManager,setup1Data:e.commonData.setup1.data},null,8,["onNext","isVoucherManager","setup1Data"])]),Object(o.createVNode)("div",u,[Object(o.createVNode)("div",d,[Object(o.createVNode)("div",m,[Object(o.createVNode)("div",b,[Object(o.createVNode)("div",p,Object(o.toDisplayString)(e.t("Maturity Date (UTC)")),1),Object(o.createVNode)("div",v,[e.commonData.setup1.data.maturity?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createTextVNode)(Object(o.toDisplayString)(e.$filters.dateUTCFormat(1e3*Number(e.commonData.setup1.data.maturity))),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:1},[O],64))])])]),Object(o.createVNode)("div",j,[Object(o.createVNode)("div",f,[Object(o.createVNode)("div",h,Object(o.toDisplayString)(e.t("Fee")),1),Object(o.createVNode)("div",V,[e.commonData.setup1.data.voucherTokenSchema?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createTextVNode)(Object(o.toDisplayString)(e.$filters.viewTokenDivDecimals(e.commonData.listFeeRate,2,2)+"%"),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:1},[g],64))])])]),Object(o.createVNode)("div",y,[Object(o.createVNode)("div",T,[Object(o.createVNode)("div",D,Object(o.toDisplayString)(e.t("Total Collateral"))+" "+Object(o.toDisplayString)(e.commonData.setup1.data&&e.commonData.setup1.data.voucherTokenSchema?"(".concat(null===(t=e.commonData.setup1.data.voucherTokenSchema)||void 0===t?void 0:t.underlyingToken.symbol,")"):""),1),Object(o.createVNode)("div",k,[e.commonData.setup1.finished?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createTextVNode)(Object(o.toDisplayString)(e.$filters.viewFixed(e.commonData.setup1.data.tokenInAmount)),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:1},[w],64))])])]),Object(o.createVNode)("div",N,[Object(o.createVNode)("div",S,[Object(o.createVNode)("div",{class:["label",[e.warningWalletBalance?"warning_color":""]]},Object(o.toDisplayString)(e.t("Wallet Balance"))+" "+Object(o.toDisplayString)(e.commonData.setup1.data&&e.commonData.setup1.data.voucherTokenSchema?"(".concat(null===(a=e.commonData.setup1.data.voucherTokenSchema)||void 0===a?void 0:a.underlyingToken.symbol,")"):""),3),Object(o.createVNode)("div",{class:["value",{"danger-tip":!e.accountInfo.compTokenInAmount&&e.commonData.setup1.finished}]},[e.commonData.setup1.data.voucherTokenSchema?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createTextVNode)(Object(o.toDisplayString)(e.$filters.parseThousandsValue(e.accountInfo.balance)),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:1},[_],64))],2)])])]),Object(o.createVNode)("div",F,[Object(o.createVNode)("div",x,[Object(o.createVNode)("div",A,[Object(o.createVNode)("div",C,[!e.commonData.isApprove&&e.accountInfo.isVoucherManager?(Object(o.openBlock)(),Object(o.createBlock)(U,{key:0,disabled:e.commonData.visibleApproveLoading,loading:e.commonData.visibleApproveLoading,onClick:e.bindApprove,class:"action-btn"},{default:n((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("Approve")),1)]})),_:1},8,["disabled","loading","onClick"])):Object(o.createCommentVNode)("",!0),Object(o.createVNode)(U,{disabled:e.disabledConfirm||e.commonData.visibleIssueLoading||!e.accountInfo.isVoucherManager||!e.commonData.isApprove,loading:e.commonData.visibleIssueLoading,onClick:e.bindIssue,class:"action-btn"},{default:n((function(){return[e.accountInfo.isVoucherManager?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("Confirm")),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:1},[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("You do not have permission to issue.")),1)],64))]})),_:1},8,["disabled","loading","onClick"])])])])])])])])):Object(o.createCommentVNode)("",!0)]})),_:1}),e.commonData.visibleLoading?(Object(o.openBlock)(),Object(o.createBlock)(R,{key:0,visible:e.commonData.visibleLoading,onClose:t[1]||(t[1]=function(t){return e.commonData.visibleLoading=!1}),onTxDone:e.handleTxDone,needDone:!0},null,8,["visible","onTxDone"])):Object(o.createCommentVNode)("",!0),e.commonData.visibleTxFinish?(Object(o.openBlock)(),Object(o.createBlock)(E,{key:1,visible:e.commonData.visibleTxFinish,hash:e.commonData.txHash,title:"IVO Issued",onClose:e.handleTxFinishedClose,pathName:"IssuanceConvertible"},null,8,["visible","hash","onClose"])):Object(o.createCommentVNode)("",!0)],64)})),B=(a("d3b7"),a("b680"),a("9ab4")),M=a("e205"),P=a("52f9"),L=a("9ddb"),U=a("f41c"),H=a("2020"),R=a("9707"),E=a("f94c"),$=a("1d85"),W=a("1c5c"),q=a("88c6"),J=a("901e"),K=a.n(J),X=a("6573"),Y=a.n(X),z=a("47e2"),G=a("6c02"),Q=Object(o.withScopeId)("data-v-e4661bf0");Object(o.pushScopeId)("data-v-e4661bf0");var Z={class:"ivo-convertible-setup1"},ee={class:"total-value-module"},te={class:"currency-select-module"},ae={class:"token-content"},oe={class:"token-content__text"},ne={key:1},ce={class:"token-content"},re={class:"token-content__text"},ie={class:"setup-form"},se={class:"setup-form__inner"},le=Object(o.createVNode)("span",null,"APR",-1),ue=Object(o.createTextVNode)("%"),de={class:"face-value"},me={class:"desc-module desc-value-right"},be={class:"bond-range-module"},pe={class:"total-value-module"},ve={class:"currency-select-module"},Oe={class:"token-content"},je={class:"token-content__text"},fe={key:1},he={class:"token-content"},Ve={class:"token-content__text"},ge={class:"desc-module desc-value-right white-color"},ye={class:"desc-module desc-value-right margin-top"};Object(o.popScopeId)();var Te=Q((function(e,t,a,n,c,r){var i=Object(o.resolveComponent)("DaInput"),s=Object(o.resolveComponent)("DaSelect"),l=Object(o.resolveComponent)("DaItem");return Object(o.openBlock)(),Object(o.createBlock)("div",Z,[Object(o.createVNode)(l,{label:e.t("Total Issuance Value"),class:"setup-form-item"},{value:Q((function(){return[Object(o.createVNode)("div",ee,[Object(o.createVNode)(i,{mode:"decimal",decimals:6,modelValue:e.setup1Form.totalValue,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.setup1Form.totalValue=t}),placeholder:"0.0",border:!0,disabled:!e.isVoucherManager},null,8,["modelValue","disabled"]),Object(o.createVNode)("div",te,[Object(o.createVNode)(s,{modelValue:e.setup1Form.currencyAddress,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.setup1Form.currencyAddress=t}),options:e.commonData.currencyList,selectedKey:"symbol",selectedValue:"address",onChange:e.handleSelectCurrencyToken,disabled:!e.commonData.currencyList||e.commonData.currencyList&&0==e.commonData.currencyList.length||!e.isVoucherManager},{content:Q((function(){var t;return[Object(o.createVNode)("div",ae,[e.setup1Form.currencyAddress?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createVNode)("img",{src:null===(t=e.commonData.selectCurrencyInfo)||void 0===t?void 0:t.logoURI,class:"token-content__icon",alt:""},null,8,["src"]),Object(o.createVNode)("span",oe,Object(o.toDisplayString)(e.setup1Form.currencySymbol),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)("span",ne,Object(o.toDisplayString)(e.t("Select Token")),1))])]})),option:Q((function(t){var a=t.row;return[Object(o.createVNode)("div",ce,[Object(o.createVNode)("img",{src:e.$filters.getTokenLocalLogo(a.logoURI,a.symbol),class:"token-content__icon",alt:""},null,8,["src"]),Object(o.createVNode)("span",re,Object(o.toDisplayString)(a.symbol),1)])]})),_:1},8,["modelValue","options","onChange","disabled"])])])]})),_:1},8,["label"]),Object(o.createVNode)("div",ie,[Object(o.createVNode)("div",se,[Object(o.createVNode)(l,{class:"setup-form-item"},{label:Q((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("Duration")),1)]})),value:Q((function(){return[Object(o.createVNode)(i,{mode:"integer",modelValue:e.setup1Form.duration,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.setup1Form.duration=t}),border:!0,placeholder:"0",disabled:!e.isVoucherManager},{suffix:Q((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("Days")),1)]})),_:1},8,["modelValue","disabled"])]})),_:1}),Object(o.createVNode)(l,{class:"setup-form-item"},{label:Q((function(){return[le]})),value:Q((function(){return[Object(o.createVNode)(i,{mode:"decimal",decimals:2,modelValue:e.setup1Form.apr,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.setup1Form.apr=t}),border:!0,placeholder:"0.0",disabled:!e.isVoucherManager},{suffix:Q((function(){return[ue]})),_:1},8,["modelValue","disabled"])]})),_:1})])]),Object(o.createVNode)(l,{label:e.t("Repayment")+" (".concat(e.t("Face Value"),")"),class:"setup-form-item price-value-module__item"},{value:Q((function(){return[Object(o.createVNode)("div",de,[Object(o.createVNode)("span",null,Object(o.toDisplayString)(e.faceValue?e.handleAmountFixed(e.faceValue):"0.0"),1),Object(o.createVNode)("span",null,Object(o.toDisplayString)(e.setup1Form.currencySymbol),1)])]})),descLabel:Q((function(){return[Object(o.createVNode)("p",me,Object(o.toDisplayString)(e.t("Repayment value after sold out")),1)]})),_:1},8,["label"]),Object(o.createVNode)(l,{class:"setup-form-item price-value-module__item"},{label:Q((function(){return[Object(o.createVNode)("div",be,[Object(o.createVNode)("div",null,Object(o.toDisplayString)(e.t("Total Collateral")),1),Object(o.withDirectives)(Object(o.createVNode)("div",{class:{"warn-info":e.collateralRatio.warn}},Object(o.toDisplayString)(e.t("Collateral Ratio"))+": "+Object(o.toDisplayString)(e.collateralRatio.valid?e.collateralRatio.value:"--"),3),[[o.vShow,e.collateralRatio.valid]])])]})),value:Q((function(){var a;return[Object(o.createVNode)("div",pe,[Object(o.createVNode)(i,{mode:"decimal",decimals:null===(a=e.setup1Form.voucherTokenSchema)||void 0===a?void 0:a.underlyingToken.decimals,modelValue:e.setup1Form.tokenInAmount,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.setup1Form.tokenInAmount=t}),placeholder:"0.0",border:!0,disabled:!e.setup1Form.voucherAddress||!e.isVoucherManager},null,8,["decimals","modelValue","disabled"]),Object(o.createVNode)("div",ve,[Object(o.createVNode)(s,{modelValue:e.setup1Form.voucherAddress,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.setup1Form.voucherAddress=t}),options:e.commonData.tokenList,selectedKey:"symbol",selectedValue:"address",onChange:e.handleSelectToken,disabled:!e.commonData.tokenList||e.commonData.tokenList&&0==e.commonData.tokenList.length},{content:Q((function(){var t,a;return[Object(o.createVNode)("div",Oe,[e.setup1Form.voucherAddress?(Object(o.openBlock)(),Object(o.createBlock)(o.Fragment,{key:0},[Object(o.createVNode)("img",{src:null===(t=e.setup1Form.voucherTokenSchema)||void 0===t?void 0:t.logoURI,class:"token-content__icon"},null,8,["src"]),Object(o.createVNode)("span",je,Object(o.toDisplayString)(null===(a=e.setup1Form.voucherTokenSchema)||void 0===a?void 0:a.underlyingToken.symbol),1)],64)):(Object(o.openBlock)(),Object(o.createBlock)("span",fe,Object(o.toDisplayString)(e.t("Select")),1))])]})),option:Q((function(t){var a=t.row;return[Object(o.createVNode)("div",he,[Object(o.createVNode)("img",{src:e.$filters.getTokenLocalLogo(a.logoURI,a.symbol),class:"token-content__icon"},null,8,["src"]),Object(o.createVNode)("span",Ve,Object(o.toDisplayString)(a.symbol),1)])]})),_:1},8,["modelValue","options","onChange","disabled"])])])]})),descLabel:Q((function(){return[Object(o.createVNode)("p",ge,Object(o.toDisplayString)(e.t("Total Value"))+": "+Object(o.toDisplayString)(e.collateralTotalValue?"$"+e.collateralTotalValue:"--"),1)]})),_:1}),Object(o.createVNode)(l,{label:e.t("Strike Price"),class:"setup-form-item price-value-module__item"},{value:Q((function(){return[Object(o.createVNode)(i,{mode:"decimal",decimals:8,modelValue:e.setup1Form.highestPrice,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.setup1Form.highestPrice=t}),placeholder:"0.0",border:!0,disabled:!e.setup1Form.voucherAddress||!e.isVoucherManager,warning:e.$filters.comp(e.settlementAmount,e.setup1Form.tokenInAmount)},{suffix:Q((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.setup1Form?e.setup1Form.currencySymbol:""),1)]})),_:1},8,["modelValue","disabled","warning"])]})),descLabel:Q((function(){var t;return[Object(o.createVNode)("p",{class:["desc-module desc-value-right",e.$filters.comp(e.settlementAmount,e.setup1Form.tokenInAmount)?"warning_color":"white-color"]},Object(o.toDisplayString)(e.t("Settlement Amount"))+": "+Object(o.toDisplayString)(e.setup1Form.voucherAddress&&e.isVoucherManager?e.settlementAmount+" ".concat(null===(t=e.setup1Form.voucherTokenSchema)||void 0===t?void 0:t.underlyingToken.symbol):"--"),3),Object(o.createVNode)("p",ye,Object(o.toDisplayString)(e.t("The settlement amount must be lower than the collateral amount, Please reset the strike price.")),1)]})),_:1},8,["label"])])})),De=(a("159b"),a("4be1")),ke=a("5aec"),we=a("e96c"),Ne=a("5214"),Se=a("dd19"),_e=a("7fdf"),Fe=a("af8d"),xe=a("8e83"),Ae=a("9af8"),Ce=Object(o.defineComponent)({components:{DaItem:ke.a,DaSelect:we.a,DaInput:De.a},props:{isVoucherManager:{type:Boolean,default:!1}},emits:["next"],setup:function(e,t){var a=t.emit,n=Object(z.b)().t,c=Object(W.a)().getters,r=Object(o.toRefs)(e).isVoucherManager,i=Object(o.reactive)({currencyList:[],tokenList:[],rangeStride:"0.1",spotPrice:0}),s=Object(o.reactive)({voucherAddress:"",lowestPrice:"",highestPrice:"",currencyAddress:"",currencySymbol:"",currencyDecimals:0,totalValue:"",duration:"",apr:"",faceValue:"",maturity:"",unitPrice:"",tokenInAmount:"",priceType:0,effectiveTime:Math.floor(new Date(R.a.dateUTCFormat(1e3*((new Date).getTime()/1e3+60))).getTime()/1e3)+"",warningPrice:!1}),l=Ne.e,u=Object(o.computed)((function(){return!!(R.a.comp(s.lowestPrice,"0")&&R.a.comp(s.highestPrice,"0")&&R.a.comp(s.highestPrice,s.lowestPrice)&&s.voucherAddress&&s.currencyAddress&&s.tokenInAmount&&s.unitPrice&&s.duration&&Number(s.duration)>0&&s.apr&&Number(s.apr)>0)})),d=Object(o.computed)((function(){return(s.duration||"0"==s.duration)&&s.totalValue&&s.apr?R.a.hideMantissa(Object(_e.a)({apr:Number(s.apr),totalValue:Number(s.totalValue),duration:Number(s.duration)})):""})),m=Object(o.computed)((function(){var e;return R.a.comp(s.highestPrice,"0")&&R.a.comp(d.value,"0")?R.a.hideMantissa(new K.a(d.value).dividedBy(s.highestPrice).toFixed((null===(e=s.voucherTokenSchema)||void 0===e?void 0:e.underlyingToken.decimals)||0,2)):""}));Object(o.watch)((function(){return[c.getSaleStartTime,s.duration]}),(function(){s.maturity=c.getSaleStartTime&&s.duration&&Number(s.duration)>0?Number(c.getSaleStartTime)+86400*Number(s.duration||0)+"":""})),Object(o.watch)((function(){return[s.maturity,s.apr,s.totalValue,d.value]}),(function(e){e[0]&&e[1]&&e[2]&&e[3]&&(s.unitPrice=new K.a(s.totalValue).dividedBy(d.value).toFixed(s.currencyDecimals,1))}));function b(){var e,t;s.warningPrice=(e=s.lowestPrice+"",t=s.highestPrice+"",!(""==e||!R.a.comp(e,t)))}var p=Object(o.computed)((function(){return d.value&&s.tokenInAmount?new K.a(d.value).dividedBy(new K.a(s.tokenInAmount)).toFixed(8,1):""})),v=Object(o.computed)((function(){return s.voucherAddress&&r.value?new K.a(s.tokenInAmount||0).multipliedBy(new K.a(i.spotPrice||0)).toFixed(2,1):""})),O=Object(o.computed)((function(){if(s.voucherAddress&&r.value&&d.value&&s.tokenInAmount&&i.spotPrice){var e=Object(Fe.a)(d.value,s.tokenInAmount,i.spotPrice);return{valid:!0,warn:!!R.a.comp(e,"100"),value:(e||0)+"%"}}return{valid:!1,warn:!1,value:""}})),j=Object(o.computed)((function(){return s.voucherAddress&&r.value&&d.value&&s.highestPrice&&Number(s.highestPrice)>0?new K.a(d.value).dividedBy(new K.a(s.highestPrice)).toFixed(6,1):"0"}));function f(){c.getChangeFlag&&(i.tokenList=[],Ae.a.solvUtils.getTokenListByType(Se.c[4]).forEach((function(e){i.tokenList.push({symbol:e.underlyingToken.symbol,address:e.underlyingToken.address,decimals:e.underlyingToken.decimals,logoURI:e.logoURI,tokenSchema:e})})),function(){try{var e=Ae.a.solvUtils.getOfferingMarket(Se.c[3]);if(!e)return;i.currencyList=Ae.a.solvUtils.getCurrencies(e.address,"Primary"),i.currencyList[0]&&(s.currencyAddress=i.currencyList[0].address,s.currencySymbol=i.currencyList[0].symbol,s.currencyDecimals=i.currencyList[0].decimals,i.selectCurrencyInfo=i.currencyList[0])}catch(e){console.log(e)}}())}return Object(o.watch)((function(){return p.value}),(function(e){s.lowestPrice=e})),Object(o.watch)((function(){return s}),(function(e){e&&a("next",{data:s,finished:u.value})}),{deep:!0}),f(),Object(o.watch)((function(){return c.getChangeFlag}),(function(){f()})),{commonData:i,setup1Form:s,spotPriceSymbol:l,faceValue:d,maxPriceToken:m,collateralTotalValue:v,collateralRatio:O,settlementAmount:j,handleAmountFixed:function(e){return R.a.hideMantissa(new K.a(e).toFixed(6,1))},handleSelectCurrencyToken:function(e){s.currencyAddress=e.address,s.currencySymbol=e.symbol,s.currencyDecimals=e.decimals,i.selectCurrencyInfo=e},t:n,handleSelectToken:function(e){var t,a;s.voucherTokenSchema=e.tokenSchema,s.voucherAddress=(null===(t=s.voucherTokenSchema)||void 0===t?void 0:t.address)||"",i.spotPrice=Object(xe.b)((null===(a=s.voucherTokenSchema)||void 0===a?void 0:a.underlyingToken.symbol)||"").price},handleInputPriceRange:function(e){b()}}}});a("1150");Ce.render=Te,Ce.__scopeId="data-v-e4661bf0";var Ie=Ce,Be=a("409f"),Me=a.n(Be),Pe=Object(o.withScopeId)("data-v-9f1dd91e");Object(o.pushScopeId)("data-v-9f1dd91e");var Le={class:"ivo-convertible-setup3"},Ue={class:"setup-form"},He={class:"setup-form__inner"},Re={class:"start-time-entry"},Ee={class:"start-time-view"},$e=Object(o.createVNode)("div",{class:"choose-date-btn"},[Object(o.createVNode)("img",{src:Me.a,class:"down-icon",alt:""})],-1),We={class:"sell-now"},qe={class:"sell-now-label"},Je={class:"start-time-entry"},Ke={class:"setup-form"},Xe={class:"setup-form__inner"},Ye={class:"start-time-entry"},ze=Object(o.createVNode)("div",{class:"choose-date-btn"},[Object(o.createVNode)("img",{src:Me.a,class:"down-icon",alt:""})],-1),Ge=Object(o.createVNode)("span",{style:{opacity:"0"}},"1",-1),Qe={class:"start-time-entry"},Ze={class:"setup-form"},et={class:"setup-form__inner"},tt=Object(o.createVNode)("span",{style:{opacity:"0"}},"1",-1);Object(o.popScopeId)();var at=Pe((function(e,t,a,n,c,r){var i=Object(o.resolveComponent)("DaDatePicker"),s=Object(o.resolveComponent)("DaItem"),l=Object(o.resolveComponent)("ElSwitch"),u=Object(o.resolveComponent)("DaTimeSelect"),d=Object(o.resolveComponent)("TextTip"),m=Object(o.resolveComponent)("DaInput"),b=Object(o.resolveComponent)("el-radio");return Object(o.openBlock)(),Object(o.createBlock)("div",Le,[Object(o.createVNode)("div",Ue,[Object(o.createVNode)("div",He,[Object(o.createVNode)(s,{label:e.t("Sale Start Time (UTC)"),class:"setup-form-item"},{value:Pe((function(){return[Object(o.createVNode)("div",Re,[Object(o.createVNode)("div",{class:"start-time-module__entry form-item__entry start-time-entry__item",style:{opacity:1},active:!e.commonData.isCurrentDate&&!!e.setup1Data.voucherAddress&&e.isVoucherManager},[Object(o.createVNode)("p",Ee,Object(o.toDisplayString)(e.setup2Form.startTimeView),1),Object(o.createVNode)(i,{modelValue:e.setup2Form.startTimeView,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.setup2Form.startTimeView=t}),type:"date",class:"start-time",onChange:e.handleStartTime,disabled:e.commonData.isCurrentDate||!e.isVoucherManager},null,8,["modelValue","onChange","disabled"]),$e],8,["active"])])]})),_:1},8,["label"]),Object(o.createVNode)(s,{class:"setup-form-item"},{label:Pe((function(){return[Object(o.createVNode)("div",We,[Object(o.createVNode)(l,{modelValue:e.commonData.isCurrentDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.commonData.isCurrentDate=t}),"active-color":"var(--d-primary1)",disabled:!e.setup1Data.voucherAddress||!e.isVoucherManager},null,8,["modelValue","disabled"]),Object(o.createVNode)("span",qe,Object(o.toDisplayString)(e.t("Sell Now")),1)])]})),value:Pe((function(){return[Object(o.createVNode)("div",Je,[Object(o.createVNode)("div",{class:"start-time-module__entry form-item__entry start-time-entry__item",style:{opacity:1},active:!e.commonData.isCurrentDate&&!!e.setup1Data.voucherAddress&&e.isVoucherManager},[Object(o.createVNode)(u,{modelValue:e.setup2Form.startHourVal,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.setup2Form.startHourVal=t}),start:"00:00",step:"01:00",end:"23:00",class:"ic-time-select",style:{opacity:e.commonData.isCurrentDate?.6:1},clearable:!1,editable:!1,disabled:e.commonData.isCurrentDate||!e.isVoucherManager},null,8,["modelValue","style","disabled"])],8,["active"])])]})),_:1})])]),Object(o.createVNode)("div",Ke,[Object(o.createVNode)("div",Xe,[Object(o.createVNode)(s,{label:e.t("Sale End Time (UTC)"),class:"setup-form-item"},{value:Pe((function(){return[Object(o.createVNode)("div",Ye,[Object(o.createVNode)("div",{class:["start-time-module__entry form-item__entry start-time-entry__item",[e.warningTime?"warning_border":""]],style:{opacity:1},active:!!e.setup1Data.voucherAddress&&e.isVoucherManager},[Object(o.createVNode)("p",{class:["start-time-view",{"opacity-font2":!e.setup2Form.endTime}]},Object(o.toDisplayString)(e.setup2Form.endTime?e.setup2Form.endTimeView:"Select"),3),Object(o.createVNode)(i,{modelValue:e.setup2Form.endTimeView,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.setup2Form.endTimeView=t}),type:"date",class:"start-time",onChange:e.handleEndTime,disabledDate:e.disabledDate,disabled:!e.setup1Data.voucherAddress||!e.isVoucherManager},null,8,["modelValue","onChange","disabledDate","disabled"]),ze],10,["active"])])]})),_:1},8,["label"]),Object(o.createVNode)(s,{class:"setup-form-item"},{label:Pe((function(){return[Ge]})),value:Pe((function(){return[Object(o.createVNode)("div",Qe,[Object(o.createVNode)("div",{class:["start-time-module__entry form-item__entry start-time-entry__item",[e.warningTime?"warning_border":""]],active:!!e.setup1Data.voucherAddress&&e.isVoucherManager},[Object(o.createVNode)(u,{modelValue:e.setup2Form.endHourVal,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.setup2Form.endHourVal=t}),start:"00:00",step:"01:00",end:"23:00",class:"ic-time-select",clearable:!1,editable:!1,disabled:!e.setup1Data.voucherAddress||!e.isVoucherManager},null,8,["modelValue","disabled"])],10,["active"])])]})),_:1})])]),Object(o.createVNode)("div",Ze,[Object(o.createVNode)("div",et,[Object(o.createVNode)(s,{class:"setup-form-item"},{label:Pe((function(){return[Object(o.createVNode)(d,null,{content:Pe((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("Minimum and maximum value that can be purchased by a single address")),1)]})),default:Pe((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.t("Purchase Limit"))+" ",1)]})),_:1})]})),value:Pe((function(){return[Object(o.createVNode)(m,{mode:"decimal",decimals:6,modelValue:e.setup2Form.min,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.setup2Form.min=t}),border:!0,placeholder:"MIN",disabled:!e.setup1Data.voucherAddress||!e.isVoucherManager,warning:e.warningMin||e.warningTips},{suffix:Pe((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.commonData.setup1Data?e.commonData.setup1Data.currencySymbol:""),1)]})),_:1},8,["modelValue","disabled","warning"])]})),_:1}),Object(o.createVNode)(s,{class:"setup-form-item"},{label:Pe((function(){return[tt]})),value:Pe((function(){return[Object(o.createVNode)(m,{mode:"decimal",decimals:6,modelValue:e.setup2Form.max,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.setup2Form.max=t}),border:!0,placeholder:"MAX",disabled:!e.setup1Data.voucherAddress||!e.isVoucherManager,warning:e.warningMax||e.warningTips},{suffix:Pe((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.commonData.setup1Data?e.commonData.setup1Data.currencySymbol:""),1)]})),_:1},8,["modelValue","disabled","warning"])]})),_:1})]),e.warningTips?(Object(o.openBlock)(),Object(o.createBlock)("p",{key:0,class:["text-tip__inner",[e.warningTips?"warning_color":""]]},Object(o.toDisplayString)(e.t("The Minimum amount must be lower than the Maximum amount")),3)):Object(o.createCommentVNode)("",!0)]),Object(o.createVNode)(s,{label:e.t("Restrictions on purchasing address"),class:"whitelist-module"},{value:Pe((function(){return[Object(o.createVNode)(b,{modelValue:e.setup2Form.useAllowList,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.setup2Form.useAllowList=t}),label:!0},{default:Pe((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.$t("Project Whitelist")),1)]})),_:1},8,["modelValue"]),Object(o.createVNode)(b,{modelValue:e.setup2Form.useAllowList,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.setup2Form.useAllowList=t}),label:!1},{default:Pe((function(){return[Object(o.createTextVNode)(Object(o.toDisplayString)(e.$t("Unlimited")),1)]})),_:1},8,["modelValue"])]})),_:1},8,["label"])])})),ot=(a("24da"),a("70b5")),nt=a.n(ot),ct=a("65d4"),rt=a("d7d3"),it=a("e672"),st={min:"",max:"",startTime:"",endTime:"",useAllowList:!0,startTimeView:R.a.dateUTCFormat((new Date).getTime()),startHourVal:"00:00",endTimeView:R.a.dateUTCFormat((new Date).getTime()),endHourVal:""},lt=Object(o.defineComponent)({components:{DaItem:ke.a,DaInput:De.a,ElSwitch:nt.a,DaDatePicker:ct.a,TextTip:it.a,DaTimeSelect:rt.a},props:{setup1Data:{type:Object,default:function(){}},finished:{type:Boolean,default:!1},isVoucherManager:{type:Boolean,default:!1}},emits:["next"],setup:function(e,t){var a=t.emit,n=Object(o.toRefs)(e).setup1Data,c=Object(z.b)().t,r=Object(W.a)(),i=r.getters,s=r.commit,l=Object(o.reactive)({isCurrentDate:!0,setup1Data:n.value}),u=Object(o.reactive)(R.a.deepCopyData(st)),d=Object(o.computed)((function(){var e=!(!u.endHourVal||R.a.compOrEqual(u.startTime||0,u.endTime||0));return u.endHourVal&&new Date(u.startTimeView+" "+u.startHourVal+":00").getTime()<new Date(u.endTimeView+" "+(u.endHourVal||"00:00")+":00").getTime()&&(e=!0),(!R.a.comp(u.min,"0")||!R.a.comp(u.min,l.setup1Data.totalValue))&&((!R.a.comp(u.max,"0")||!R.a.comp(u.max,l.setup1Data.totalValue))&&(!(R.a.comp(u.min,"0")&&R.a.comp(u.max,"0")&&R.a.comp(u.min,u.max)||!e)&&!(R.a.comp(u.min,"0")&&R.a.comp(u.max,"0")&&R.a.comp(u.min,u.max)||!e)))})),m=Object(o.computed)((function(){var e=!1;return u.endHourVal&&new Date(u.startTimeView+" "+u.startHourVal+":00").getTime()>new Date(u.endTimeView+" "+(u.endHourVal||"00:00")+":00").getTime()&&(e=!0),e})),b=Object(o.computed)((function(){return!(!R.a.comp(u.min,"0")||!R.a.comp(u.min,l.setup1Data.totalValue)&&!R.a.comp(u.min,u.max))})),p=Object(o.computed)((function(){return!(!R.a.comp(u.max,"0")||!R.a.comp(u.max,l.setup1Data.totalValue))})),v=Object(o.computed)((function(){return R.a.comp(u.min,u.max)})),O=function(){u.startTimeView=R.a.dateFormat(new Date(u.startTimeView).getTime()),u.startHourVal=l.isCurrentDate?R.a.dayjsUTCFormat(i.getBlockTimestamp?1e3*i.getBlockTimestamp:(new Date).getTime(),"HH:00"):u.startHourVal;var e=u.startTimeView+" "+u.startHourVal+":00 UTC",t=new Date(e).getTime();u.startTime=Math.floor(t/1e3)+"";var a=Math.floor(new Date(u.startTimeView+" 00:00:00 UTC").getTime()/1e3)+"";s("setSaleStartTime",a)};O();var j=function(){u.endTimeView=R.a.dateFormat(new Date(u.endTimeView).getTime());var e=u.endTimeView+" "+(u.endHourVal?u.endHourVal:"00:00")+":00 UTC",t=new Date(e).getTime();u.endTime=Math.floor(t/1e3)+""};Object(o.watch)((function(){return l.isCurrentDate}),(function(){l.isCurrentDate&&(u.startTimeView=R.a.dateUTCFormat((new Date).getTime()),O())}));var f=function(e){e&&(O(),j()),a("next",{data:u,finished:e})};return Object(o.watchEffect)((function(){l.setup1Data=n.value})),Object(o.watch)((function(){return[d.value,l.setup1Data]}),(function(){d.value&&l.setup1Data?f(!0):f(!1)})),{commonData:l,setup2Form:u,warningTime:m,warningMin:b,warningMax:p,warningTips:v,t:c,handleStartTime:O,handleEndTime:j,bindNext:f,disabledDate:function(e){var t=new Date(u.startTimeView+" 00:00:00").getTime()/1e3;return e.getTime()<1e3*t}}}});a("f622");lt.render=at,lt.__scopeId="data-v-9f1dd91e";var ut=lt,dt=Object(o.defineComponent)({components:{PageWrapper:U.a,Setup1:Ie,Setup3:ut,DaButton:M.a,TxFinish:P.a,Loading:L.a},props:{},setup:function(){var e=this,t=Object(z.b)().t,a=Object(W.a)().getters,n=Object(G.d)().back;function c(e){return new K.a("10").pow(new K.a(e))}var r=Object(o.reactive)({visibleIssueLoading:!1,isApprove:!0,allowance:0,visibleApproveLoading:!1,visibleLoading:!1,visibleTxFinish:!1,txHash:"",loadFinished:!0,listFeeRate:"0",setup1:{data:{voucherAddress:"",lowestPrice:"",highestPrice:"",currencyAddress:"",currencySymbol:"",currencyDecimals:0,totalValue:"",duration:"",apr:"",faceValue:"",maturity:"",unitPrice:"",tokenInAmount:"",priceType:0,effectiveTime:""},finished:!1},setup2:{data:{min:"",max:"",startTime:"",endTime:"",useAllowList:!0,startTimeView:"",startHourVal:"",endTimeView:"",endHourVal:""},finished:!1}}),i=Object(o.reactive)({loadFinished:!1,balance:"0",allowance:"0",compTokenInAmount:!1,isVoucherManager:!0});function s(){var e;return Object(B.b)(this,void 0,void 0,(function(){var t;return Object(B.e)(this,(function(o){switch(o.label){case 0:return r.setup1.data&&r.setup1.data.voucherTokenSchema?[4,Object($.c)().underlyingAllowance(a.getAccount,null===(e=r.setup1.data.voucherTokenSchema)||void 0===e?void 0:e.underlyingToken.address)]:[3,2];case 1:t=o.sent(),r.allowance=t,r.isApprove=t>0,o.label=2;case 2:return[2]}}))}))}function l(){if(!r.setup1.data||!r.setup1.data.voucherTokenSchema||!r.setup2.finished)return 0;var e=r.setup1.data.voucherTokenSchema;return new K.a(r.setup1.data.totalValue).dividedBy(new K.a(r.setup1.data.unitPrice)).dividedBy(new K.a(r.setup1.data.lowestPrice)).multipliedBy(c(e.underlyingToken.decimals)).toFixed(0,2)}var u=Object(o.computed)((function(){var e=!0;return!(e=!(r.setup1.finished&&r.setup2.finished&&i.compTokenInAmount))&&r.setup1.finished&&r.setup2.data&&(R.a.comp(r.setup2.data.min,r.setup1.data.totalValue)&&(e=!0),R.a.comp(r.setup2.data.max,r.setup1.data.totalValue)&&(e=!0)),e})),d=Object(o.computed)((function(){return!!R.a.comp(R.a.viewFixed(r.setup1.data.tokenInAmount),i.balance)}));return Object(o.watchEffect)((function(){i.compTokenInAmount=!(!r.setup1.finished||!R.a.compOrEqual(i.balance,r.setup1.data.tokenInAmount||0)),r.setup1.finished&&r.setup1.data.voucherTokenSchema&&(r.isApprove=R.a.compOrEqual(R.a.tokenDivDecimals(r.allowance,r.setup1.data.voucherTokenSchema.underlyingToken.decimals),r.setup1.data.tokenInAmount))})),{commonData:r,disabledConfirm:u,accountInfo:i,warningWalletBalance:d,bindSetup1Next:function(e){r.setup1.data=e.data,r.setup1.finished=e.finished,e.data.voucherAddress&&a.getChangeFlag&&(function(){var e,t;Object(B.b)(this,void 0,void 0,(function(){var o,n;return Object(B.e)(this,(function(c){switch(c.label){case 0:return r.setup1.data.voucherTokenSchema?(i.loadFinished=!1,[4,new H.Erc20Token((null===(e=r.setup1.data.voucherTokenSchema)||void 0===e?void 0:e.underlyingToken.address)||"",a.getProvider).balanceOf(a.getAccount)]):[2];case 1:if(o=c.sent(),void 0===r.setup1.data.voucherTokenSchema)throw new Error("Wrong voucher token schema");return n=i,[4,Object($.c)().isVoucherManager(r.setup1.data.voucherTokenSchema.address,a.getAccount)];case 2:return n.isVoucherManager=c.sent(),i.loadFinished=!0,i.balance=R.a.hideMantissa(R.a.tokenDivDecimals(o||"0",(null===(t=r.setup1.data.voucherTokenSchema)||void 0===t?void 0:t.underlyingToken.decimals)+"",6)),i.isVoucherManager&&s(),[2]}}))}))}(),function(){var e;Object(B.b)(this,void 0,Promise,(function(){var t;return Object(B.e)(this,(function(a){switch(a.label){case 0:return r.setup1.data.voucherTokenSchema?[4,Object($.c)().getMarkets((null===(e=r.setup1.data)||void 0===e?void 0:e.voucherAddress)+"")]:[2];case 1:return t=a.sent(),r.listFeeRate=t.feeRate+"",[2]}}))}))}())},bindSetup3Next:function(e){r.setup2.data=e.data,r.setup2.finished=e.finished},t:t,bindIssue:function(){return Object(B.b)(e,void 0,void 0,(function(){var e,a,o,n,i,s,u,d,m,b,p,v;return Object(B.e)(this,(function(O){switch(O.label){case 0:r.visibleIssueLoading=!0,O.label=1;case 1:return O.trys.push([1,3,,4]),(e=r.setup1.data.voucherTokenSchema)?(a=l(),o=R.a.tokenMulDecimals(r.setup1.data.lowestPrice,8),n=R.a.tokenMulDecimals(r.setup1.data.highestPrice,8),i=new K.a(r.setup2.data.min||0).dividedBy(new K.a(r.setup1.data.unitPrice)),s=new K.a(r.setup2.data.max||0).dividedBy(new K.a(r.setup1.data.unitPrice)),u=i.multipliedBy(new K.a("10").pow(new K.a(e.underlyingToken.decimals+8))).toFixed(0,1),d=s.multipliedBy(new K.a("10").pow(new K.a(e.underlyingToken.decimals+8))).toFixed(0,2),r.setup2.data.max&&r.setup2.data.max==r.setup1.data.totalValue&&(d=function(){var e,t,a;if(!(null===(e=r.setup1)||void 0===e?void 0:e.data)||!(null===(t=r.setup2)||void 0===t?void 0:t.data)||!(null===(a=r.setup1)||void 0===a?void 0:a.data.voucherTokenSchema))return"0";var o=r.setup1.data.voucherTokenSchema;return new K.a(l()).dividedBy(c(o.underlyingToken.decimals)).multipliedBy(new K.a(r.setup1.data.lowestPrice).multipliedBy(c(8))).multipliedBy(c(o.underlyingToken.decimals)).toFixed(0)}()),m="",0==r.setup1.data.priceType&&(m=H.VestingOfferingMarket.encodeOfferPriceData(["uint128"],[R.a.tokenMulDecimals(r.setup1.data.unitPrice,r.setup1.data.currencyDecimals)])),b={commonParams:{voucherAddress:r.setup1.data.voucherAddress,currencyAddress:r.setup1.data.currencyAddress,min:u,max:d,startTime:r.setup2.data.startTime,endTime:r.setup2.data.endTime,useAllowwList:r.setup2.data.useAllowList,priceType:0,priceData:m},mintVestingParams:{lowestPrice:o,highestPrice:n,tokenInAmount:a,effectiveTime:r.setup1.data.effectiveTime,maturity:r.setup1.data.maturity}},[4,Object($.c)().offer(b)]):[2];case 2:return p=O.sent(),r.visibleIssueLoading=!1,Object(q.b)(p),r.visibleLoading=!0,[3,4];case 3:return v=O.sent(),r.visibleIssueLoading=!1,Y.a.error(t(Object(E.a)().parseErrorInfo(v))),[3,4];case 4:return[2]}}))}))},bindApprove:function(){return Object(B.b)(this,void 0,void 0,(function(){return Object(B.e)(this,(function(e){switch(e.label){case 0:if(!r.setup1.data||!r.setup1.data.voucherTokenSchema)return[3,6];e.label=1;case 1:return e.trys.push([1,5,,6]),r.visibleApproveLoading=!0,[4,Object($.c)().underlyingApprove(r.setup1.data.voucherTokenSchema.underlyingToken.address)];case 2:return[4,e.sent().wait()];case 3:return e.sent(),[4,s()];case 4:return e.sent(),r.visibleApproveLoading=!1,[3,6];case 5:return e.sent(),r.visibleApproveLoading=!1,[3,6];case 6:return[2]}}))}))},handleTxDone:function(e,t){r.txHash=t,r.visibleTxFinish=!0},handleTxFinishedClose:function(){r.visibleTxFinish=!1,n()}}}});a("fb7b"),a("3feb");dt.render=I,dt.__scopeId="data-v-e5e77886";t.default=dt},de85:function(e,t,a){},f622:function(e,t,a){"use strict";a("4731")},fb7b:function(e,t,a){"use strict";a("de85")}}]);